var fn_addin=function(i,a,e){var s=s||{};return s.styles=s.styles||{},s.commands=s.commands||{},s.dependencies=e||s.dependencies||{},s.styles.style=function(){},s.views=s.views||{},s.collect=s.collect||{},s.models=s.models||{},s.templates=s.templates||{},s.styles=s.styles||{},s.styles.style=function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".search,.search .search-input{width:var(--width);position:relative}.search{--width:230px;z-index:1;display:inline-block}.search .search-input{height:60px;padding:20px 0 20px 36px;z-index:2;background:0 0;border:none;-moz-box-sizing:border-box;box-sizing:border-box;color:#fff;cursor:pointer;line-height:20px;outline:0}.search .icon-search,.search-underline{position:absolute;z-index:1;transition:opacity var(--a-fast) ease}.search-input:focus{cursor:text}.search-underline{top:49px;left:9px;right:0;border-bottom:2px solid #fff;opacity:0}.search.active .search-underline{opacity:1}.search .icon-search{left:10px;top:0;line-height:57px;opacity:.7}.search:hover .icon-search{opacity:.85}.search.active .icon-search{opacity:1}",document.getElementsByTagName("head")[0].appendChild(e)},s.views.Search=Backbone.View.extend({className:"app-container search",events:{"focusin .search-input":"handleFocusIn","focusout .search-input":"handleFocusOut","keyup .search-input":"checkForEscape","submit .search-form":"doSearch"},initialize:function(){this.renderedOnce=!1,this.listenTo(i,"globalEvent:click",this.hideResults),this.listenTo(i,"globalEvent:esc",this.hide),this.listenTo(i,"globalEvent:toggleSearch",this.toggleShow),this.listenTo(i.models.customization,"change:searchVisible",this.visibleChanged),this.render()},render:function(){return this.$el.html(a.trim('<form class="search-form"><span class="search-underline"></span><i class="icon-search"></i><input type="text" id="search-input" class="search-input" autocomplete="off"></form>')),this.$input=this.$el.find("input"),this.renderedOnce=!0,this},visibleChanged:function(e){i.models.customization.get("searchVisible")?this.renderedOnce?this.$el.mFadeIn():this.render():this.$el.mFadeOut(500,!1)},doSearch:function(e){e.preventDefault();var n=this.$el.find(".search-input")[0].value;if(0<n.length){var s=i.globals.urlRootApi+"search";if(!localStorage.token){var t=i.models.customization.get("searchProvider");t||(t="google"),s=s+"?provider="+t}a.ajax({type:"GET",beforeSend:i.utils.setMomentumAuthHeader,url:s}).done(function(e,s,t){if(e&&e.searchUrl){var i=e.searchUrl+encodeURIComponent(n);e.searchOutput&&"redirect"==e.searchOutput?window.location.href=i:a(".search-results").attr("src",i).attr("target","_top").addClass("fadein").css("display","block")}}).fail(function(e,s){var t="https://search.momentumdash.com/?q="+encodeURIComponent(n);a(".search-results").attr("src",t).attr("target","_top").addClass("fadein").css("display","block")}),i.sendEvent("Search","Searched")}},handleFocusIn:function(){a(".search").addClass("active"),i.sendEvent("Search","Focused")},handleFocusOut:function(){a(".search").removeClass("active")},hideResults:function(e){(!a.contains(this.el,e.target)&&a(".search-results").hasClass("fadein")||1==e.hide)&&a(".search-results").removeClass("fadein").css("display","none")},checkForEscape:function(e){27==e.keyCode&&this.hideResults({hide:"true"})},toggleShow:function(e){this.$input.is(":focus")?this.$input.blur():this.$input.focus()},hide:function(){this.$input.is(":focus")&&this.$input.blur()}}),s.styles.style(),setTimeout(function(){s.views.search=i.widgetManager.handover("search",s.views.Search,{region:"top-left",order:"append"})}),s};m.addinManager&&m.addinManager.registerAddinFn("15ee3ec9-f912-485a-84be-a358e676d4a4",fn_addin);