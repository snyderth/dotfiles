cC.prototype.bj=ea(105,function(){return T(this,2)});AM.prototype.bj=ea(104,g("F"));$Y.prototype.bj=ea(103,function(){return T(this,1)});bZ.prototype.bj=ea(102,function(){return T(this,1)});cZ.prototype.bj=ea(101,function(){return T(this,2)});gZ.prototype.bj=ea(100,function(){return T(this,1)});oZ.prototype.bj=ea(99,function(){return T(this,1)});
AZ.prototype.bj=ea(98,function(a){var b=this,c=new Az;c.oi=!0;var d=c.serialize(a);return new Oe(function(a,f){BZ(b,"/dbx/getExecutionStatus",d,function(b){c.oi=!1;b=c.ld(oZ.Ba(),b.bf());a(b)},function(){f()})})});function r8d(a,b){var c=new Az;c.oi=!0;var d=c.serialize(b);return new Oe(function(b,f){BZ(a,"/dbx/createQuery",d,function(a){c.oi=!1;a=c.ld($Y.Ba(),a.bf());3==a.bj().getState()?f(a):b(a)},function(){var a=new $Y,b=new Mz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}
function s8d(a,b){var c=new Az;c.oi=!0;var d=c.serialize(b);return new Oe(function(b,f){BZ(a,"/dbx/previewQuery",d,function(a){c.oi=!1;a=c.ld(bZ.Ba(),a.bf());3==a.bj().getState()?f(a):b(a)},function(){var a=new bZ,b=new Mz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}
function t8d(a,b){var c=new Az;c.oi=!0;var d=c.serialize(b);return new Oe(function(e,f){BZ(a,"/dbx/refreshSheets",d,function(a){c.oi=!1;a=c.ld(Z8c.Ba(),a.bf());Hv(a,1).some(function(a){return 3==a.bj().getState()})?f(a):e(a)},function(){var a=new Z8c,c=new Mz;c.tb(3);U(c,2,1);Hv(b,1).forEach(function(b){var d=new cZ;U(d,1,b);U(d,2,c);Fv(a,1,d)});f(a)})})}
function u8d(a,b){var c=new Az;c.oi=!0;var d=c.serialize(b);return new Oe(function(b,f){BZ(a,"/dbx/editQuery",d,function(a){c.oi=!1;a=c.ld(gZ.Ba(),a.bf());3==a.bj().getState()?f(a):b(a)},function(){var a=new gZ,b=new Mz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}function v8d(a){var b=new Az;return new Oe(function(c,d){nw(eu(ow(kx(fu(a.C.mf("/dbx/listConnections"),"GET")),1).setTimeout(3E4),function(a){b.oi=!1;a=b.ld(h9c.Ba(),a.bf());c(a)}),d).Ne()})}
function w8d(a,b){var c=new Az;c.oi=!0;var d=vo(c.serialize(b));return new Oe(function(b,f){nw(eu(Zw(ow(kx(fu(a.C.mf("/dbx/getQuery"),"POST")),1).setTimeout(3E4),["data",d]),function(a){c.oi=!1;a=c.ld(v9c.Ba(),a.bf());T(a,1)?b(a):f("Query is not found")}),f).Ne()})}
function x8d(a,b){var c=new Az;c.oi=!0;var d=c.serialize(b);return new Oe(function(b,f){BZ(a,"/dbx/getBigQueryProjects",d,function(a){c.oi=!1;a=c.ld(mZ.Ba(),a.bf());a.Qt()&&f(a);b(a)},function(){var a=new bZ,b=new Mz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}function y8d(a,b){var c=new Az;c.oi=!0;var d=c.serialize(b);return new Oe(function(b,f){BZ(a,"/dbx/getConnection",d,function(a){c.oi=!1;a=c.ld(C9c.Ba(),a.bf());b(a)},function(){f()})})}function z8d(a){lf(this,a,0,-1,null,null)}w(z8d,kf);function A8d(a,b,c){b=void 0===b?"":b;c=void 0===c?"dataconnector-querytype-raw":c;this.C=[];for(var d=0;d<a.length;d++)this.C.push(a[d].clone());this.F=b;this.D=c};function B8d(){var a='<div class="'+Q("waffle-dataconnector-footer-sharing-message")+'">';return P(a+'<span>The data you query is visible to everyone with view access, but your query is only visible to people with edit access. <a href="https://support.google.com/docs/answer/9077536" target="_blank">Learn more</a></span></div>')};function C8d(a){a=a.SDb;var b='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-section")+'"><h3 class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-header")+'">';b=b+"Billing project"+('</h3><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper")+'"></div>'+(a?'<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-radio-group")+'"><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")+
'"></div><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")+'"></div></div>':"")+"</div>");return P(b)}function D8d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper")+'"><p>';a=a+'Your use of BigQuery is governed by the Google Cloud Platform <a href="https://cloud.google.com/terms/" target="_blank">Terms of Service</a>.'+("</p></div>"+O(B8d(null,b)));return P(a)};function E8d(){return P('<svg class="waffle-dataconnector-database-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#000" fill-rule="evenodd"><ellipse cx="9" cy="5" rx="7" ry="3"/><path d="M16,7 L16,8.99999983 C16,10.6568542 12.8659932,12 9,12 C5.13400675, 12 2,10.6568542 2,9 L2,7 C2,8.65685425 5.13400675,10 9,10 C12.8659932,10 16,8.65685425 16,7 Z"/><path d="M16,11 L16,12.9999998 C16,14.6568542 12.8659932,16 9,16 C5.13400675,16 2,14.6568542 2,13 L2,11 C2,12.6568542 5.13400675,14 9,14 C12.8659932,14 16,12.6568542 16,11 Z"/></g></svg>')}
function F8d(a){a=a||{};var b=a.color;a="";b=Ks(b,null)?"#D0021B":b;a+='<svg class="waffle-dataconnector-error-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="'+Q(b)+'" fill-rule="evenodd" d="M9,13 L11,13 L11,15 L9,15 L9,13 Z M9,5 L11,5 L11,11 L9,11 L9,5 Z M9.99,0 C4.47,0 0,4.48 0,10 C0,15.52 4.47,20 9.99,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 9.99,0 Z M10,18 C5.58,18 2,14.42 2,10 C2,5.58 5.58,2 10,2 C14.42,2 18,5.58 18,10 C18,14.42 14.42,18 10,18 Z"></path></g></svg>';
return P(a)}
function G8d(){return P('<svg class="waffle-dataconnector-bigquery-icon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="#000000" fill-rule="evenodd" d="M17.6210231,14.9676464 C17.7267041,14.964158 17.8336481,14.999598 17.9136667,15.0739664 L21.2187334,18.1431672 C21.3715333,18.2853017 21.3715333,18.5181274 21.2187334,18.6604475 L19.8908,19.8929813 C19.7375334,20.0356729 19.4867333,20.0356729 19.3334666,19.8929813 L16.0288667,16.8252043 C15.9483809,16.7504669 15.9100327,16.6511429 15.9138223,16.5530387 C14.5318646,17.5088871 12.8185327,18.0746254 10.962963,18.0746254 C6.38121025,18.0746254 2.66666667,14.6253786 2.66666667,10.3707987 C2.66666667,6.11585235 6.38121025,2.66666667 10.962963,2.66666667 C15.5447814,2.66666667 19.259325,6.11585235 19.2592593,10.3708597 C19.2592593,12.0936892 18.6501585,13.6844725 17.6210231,14.9676464 Z M10.9627632,16.1481946 C14.3991593,16.1481946 17.1851852,13.5615621 17.1851852,10.3706486 C17.1851852,7.17973497 14.3992258,4.59254616 10.9627632,4.59254616 C7.52630064,4.59254616 4.74074074,7.17967314 4.74074074,10.3706486 C4.74074074,13.561624 7.52630064,16.1481946 10.9627632,16.1481946 Z M6.81481481,10.3703704 L8.88888889,10.3703704 L8.88888889,14.0029401 C8.03391111,13.6464441 7.31942754,13.1505168 6.81481481,12.5594013 L6.81481481,10.3703704 Z M9.92592593,8.44442896 L12,8.44442896 L12,14.1665272 C11.6766072,14.200082 11.3475683,14.2222532 11.0093815,14.2222532 C10.6390341,14.2222532 10.2784063,14.1975885 9.92592593,14.1574203 L9.92592593,8.44442896 Z M13.044326,11.3333411 L15.1184,11.3333411 L15.1184,12.4901418 C14.6287957,13.0790718 13.9116201,13.5742789 13.044326,13.933362 L13.044326,11.3333411 Z"></path></g></svg>')}
function H8d(a){a=a||{};var b=a.opacity;a="";b=Ks(b,null)?1:b;a+='<svg class="waffle-dataconnector-menu-icon" fill="#000000" fill-opacity="'+Q(b)+'" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>';return P(a)};function I8d(){var a=P,b='<div class="'+Q("waffle-dataconnector-modal-header")+'"><div class="'+Q("waffle-dataconnector-modal-title")+'" role="heading"></div><div class="'+Q("waffle-dataconnector-modal-close-button")+'" tabindex="0" role="button">';var c=P('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>');
return a(b+c+'</div></div><div class="'+Q("waffle-dataconnector-modal-body")+'"></div><div class="'+Q("waffle-dataconnector-modal-footer")+'"></div>')};function x4(a,b){a=void 0===a?"":a;dt.call(this,!1,b);this.zb=a;this.C=new Mr(void 0,J8d.getInstance());this.Ga(this.C);this.C.Uf("Close");this.ub=null;this.hb=!0}r(x4,dt);p=x4.prototype;
p.Ca=function(){dt.prototype.Ca.call(this);var a=this.getId();vk(this.Oa(),"labelledby",a);qk(this.Oa(),"dialog");J(this.getElement(),"waffle-dataconnector-modal");this.zb&&J(this.getElement(),this.zb);Cs(this.getElement(),I8d);this.Ja("waffle-dataconnector-modal-title").id=a;a=this.qq();J(a,"waffle-dataconnector-modal-bg");K(a,this.hb);this.C.Va(this.Ja("waffle-dataconnector-modal-close-button"));this.ub&&K8d(this)};
p.Ia=function(){dt.prototype.Ia.call(this);L8d(this);this.getHandler().R(this.C,"action",this.KX);this.getHandler().R(this.Oa(),["keydown","keypress"],this.bIb)};p.sb=function(){return this.ib("waffle-dataconnector-modal-body")};function M8d(a){return a.ib("waffle-dataconnector-modal-footer")}function N8d(a,b){a.ub=b;a.rb()&&K8d(a)}function L8d(a){var b=a.qa(),c=a.qq(),d=a.gp;a.hb?(d&&b.pr(d,a.getElement()),b.pr(c,a.getElement())):(b.Af(d),b.Af(c))}p.KX=function(){gub.Kb()};p.P5=function(){gub.Kb()};
p.bIb=function(a){"keydown"==a.type?27==a.keyCode?this.P5():9==a.keyCode&&a.shiftKey&&a.target==this.getElement()&&SRa(this):this.VEa(a)};function K8d(a){Pl.getInstance().setContent(a.Ja("waffle-dataconnector-modal-title"),a.ub)}p.VEa=ba();function J8d(){}r(J8d,Lr);J8d.prototype.Bp=n("waffle-dataconnector-modal-close-button");va(J8d);function y4(a,b){x4.call(this,a,b);this.H=Te()}r(y4,x4);p=y4.prototype;p.getResult=function(){return this.H.C};p.resolve=function(a){this.H.resolve(a)};p.reject=function(a){this.H.reject(a)};p.Ha=function(){x4.prototype.Ha.call(this);this.H.reject()};p.P5=function(){this.reject()};p.KX=function(){this.reject()};var O8d=new Ou(1);function P8d(a){var b=1024<=a;a=b?f1c(parseInt(a,10)):a;return(new Qu("{AT_LEAST_ONE_KB, select, \n     true {Will process {BYTES}.}\n     other {\n         {BYTES, plural,\n             =0 {Will process # bytes.}\n             =1 {Will process # byte.}\n             other {Will process # bytes.}}}}")).format({AT_LEAST_ONE_KB:b?"true":"false",BYTES:a})}
function Q8d(){var a=new Zq,b="Configure a project in the Google Cloud Platform console to continue. "+(a.ue("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.ye("a")));return a.format(b)};function R8d(a,b){y4.call(this,"waffle-dataconnector-bigqueryquerysettingsdialog",b);N8d(this,this.qa().Ca("SPAN",void 0,N(G8d),"BigQuery data connection"));this.J=a.C;this.D=new oU;this.Ga(this.D);this.D.Dd("waffle-dataconnector-bigqueryquerysettingsdialog-project-select");this.D.Uf("Billing project");a=this.D;a.D="Select a project";a.Rx();this.L=new WX(this.qa(),"Raw data");this.ma=new WX(this.qa(),"Pivot table");this.O=new XX([this.L,this.ma]);this.F=new YY("Write query");this.Ga(this.F);this.F.Dd("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button")}
r(R8d,y4);
R8d.prototype.Ca=function(){y4.prototype.Ca.call(this);var a=I(H(),"fedp");Cs(this.sb(),C8d,{SDb:a});M8d(this).appendChild(N(D8d));this.D.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper"));this.F.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper"));a&&(this.L.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")),this.ma.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")),YX(this.O,
this.L))};R8d.prototype.Ia=function(){y4.prototype.Ia.call(this);if(0==this.J.length){this.D.Na(!1);var a=this.D;a.D="No billing projects";a.Rx();a=this.qa();var b=pe(a,Q8d());a.appendChild(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-section"),a.Ca("DIV","waffle-dataconnector-bigqueryquerysettingsdialog-error-caption",b))}else{a=this.J;for(b=0;b<a.length;b++){var c=a[b];this.D.cd(new un(S8d(c),c.getId()))}this.getHandler().R(this.F,"action",this.Da).R(this.D,"change",this.va)}this.va()};
R8d.prototype.va=function(){this.F.Na(null!=this.D.Ye())};R8d.prototype.Da=function(){this.resolve(T8d(this))};function T8d(a){var b=a.D.Ye().getValue(),c="dataconnector-querytype-raw";I(H(),"fedp")&&"Pivot table"==ZX(a.O).getLabel()&&(c="dataconnector-querytype-pivot");return new A8d(a.J,b,c)}function S8d(a){var b=a.getName();a=a.getId();return b+" ["+a+"]"};function U8d(a){this.C=a}function V8d(a){var b=new p9c;return x8d(a.C,b).then(function(a){return Hv(a,4)})};function z4(a,b){et.call(this,"waffle-dataconnector-prompt",a,b);this.L=Te();qt(this,null);pt(this,!0);this.C=new sX("Continue");this.Ga(this.C);this.J=new tX("Cancel");this.Ga(this.J);this.O=[]}r(z4,et);p=z4.prototype;p.Dd=function(a){this.O.push(a);var b=this.getElement();b&&J(b,a)};p.getResult=function(){return this.L.C};p.resolve=function(a){this.L.resolve(a)};p.reject=function(){this.L.reject()};p.Ca=function(){et.prototype.Ca.call(this);var a=jt(this);this.J.render(a);this.C.render(a);K(a,!0)};
p.Ia=function(){var a=this;et.prototype.Ia.call(this);Dk(this.Oa(),this.O);this.getHandler().R(this.J,"action",function(){return a.reject()})};p.setVisible=function(a){et.prototype.setVisible.call(this,a);a||this.reject()};p.Ha=function(){et.prototype.Ha.call(this);this.reject()};function W8d(a,b){z4.call(this,a,b)}r(W8d,z4);W8d.prototype.Ia=function(){var a=this;z4.prototype.Ia.call(this);this.getHandler().R(this.C,"action",function(){return a.resolve(0)})};function X8d(a){return P('<div class="'+Q("waffle-dataconnector-connectioncard")+'" role="button" tab-index="0"><div class="'+Q("waffle-dataconnector-connectioncard-icon")+'"></div><div class="'+Q("waffle-dataconnector-connectioncard-body")+'"><div class="'+Q("waffle-dataconnector-connectioncard-header")+'">'+O(a.Pda)+'</div><div class="'+Q("waffle-dataconnector-connectioncard-type")+'">'+O(a.z1a)+"</div></div></div>")};function Y8d(){}r(Y8d,Lr);Y8d.prototype.Ca=function(a){a=a.Ra();return N(X8d,{Pda:a.getName(),z1a:"SQL"})};Y8d.prototype.Qb=n("waffle-dataconnector-connectioncard");va(Y8d);function Z8d(a,b){Mr.call(this,void 0,Y8d.getInstance(),b);this.kc(a);this.$e(8,!0)}r(Z8d,Mr);Z8d.prototype.kc=function(a){Mr.prototype.kc.call(this,a)};function $8d(){var a='<div class="'+Q("waffle-dataconnector-connectionmanager-content")+'"><div class="'+Q("waffle-dataconnector-connectionmanager-header")+'">';a=a+"Choose a data source"+('</div><div class="'+Q("waffle-dataconnector-connectionmanager-connections")+'"></div></div>');return P(a)};function a9d(a){y4.call(this,"waffle-dataconnector-connectionmanager",a);N8d(this,this.qa().Ca("SPAN",void 0,N(E8d),"Managed data sources"));this.D=new M(this.qa());this.Ga(this.D);this.F=new aY;this.Ga(this.F);this.L=AZ.getInstance()}r(a9d,y4);a9d.prototype.Ca=function(){y4.prototype.Ca.call(this);Cs(this.sb(),$8d);M8d(this).appendChild(N(B8d));this.F.render(this.Ja("waffle-dataconnector-connectionmanager-content"))};
a9d.prototype.Ia=function(){var a=this;y4.prototype.Ia.call(this);this.D.Va(this.Ja("waffle-dataconnector-connectionmanager-connections"));this.getHandler().R(this.D,"action",this.J);b9d(this,!0);v8d(this.L).then(function(b){b=Hv(b,1);c9d(a,b);b9d(a,!1)},function(){b9d(a,!1);Qq.getInstance().postMessage(Wq("Could not get managed data sources","error",!0))})};function b9d(a,b){Gk(a.Oa(),"waffle-dataconnector-connectionmanager-loading",b);a.F.setActive(b)}
function c9d(a,b){var c=a.Ja("waffle-dataconnector-connectionmanager-connections");if(0==b.length){var d=new Zq,e="You do not have access to any managed data sources. "+(d.ue("a",{"class":"goog-inline-block",href:"https://sites.google.com/corp/google.com/dataconnectors/home",target:"_blank"})+("Learn more"+d.ye("a")));b=a.qa();d=pe(b,d.format(e));b.appendChild(c,b.Ca("DIV","waffle-dataconnector-connectionmanager-no-connections-message",d));K(a.Ja("waffle-dataconnector-connectionmanager-header"),!1)}else{b=
ia(b);for(d=b.next();!d.done;d=b.next())d=new Z8d(d.value),a.D.Ga(d),d.render(c);b=new sX("CREATE NEW DATA SOURCE");a.Ga(b);b.render(c);a.getHandler().R(b,"action",function(){ar("https://sites.google.com/corp/google.com/dataconnectors/home")})}}a9d.prototype.J=function(a){a.stopPropagation();this.resolve(a.target.Ra())};function d9d(){y.call(this);this.C={};this.D=new Az}r(d9d,y);function e9d(a,b,c){a.C[b]=c}function f9d(a,b){var c=ritz_api.DbxApi.getExecutionStatusForQuery(b);c=null==c?null:a.D.ld(Mz.Ba(),c);var d=a.C[b];return d?c&&d.getToken()==c.getToken()?(qc(a.C,b),c):d:c};function g9d(a){y.call(this);this.F=a;this.D=new E;this.xa(this.D);this.C=[]}r(g9d,y);function h9d(a){return 0<a.C.length?Sa(a.C):null}function A4(a,b,c){void 0===c||c?i9d(a):(c=h9d(a))&&c.setVisible(!1);b.Kd(a.D);b instanceof et?a.F.Jh(b):(c=new kKb(b),c.Kd(a.D),a.F.Jh(c));b.render();b.setVisible(!0);a.C.push(b)}function j9d(a){var b=a.C.pop();for(A(b);0<a.C.length;)if(b=Sa(a.C),b.isDisposed())a.C.pop();else{b.setVisible(!0);break}}
function i9d(a){for(var b=ia(a.C),c=b.next();!c.done;c=b.next())A(c.value);a.C=[]}g9d.prototype.Ha=function(){i9d(this);y.prototype.Ha.call(this)};function k9d(a,b,c){b=c||b;b="<div id="+Rs(a.id)+' class="'+Q("waffle-dataconnector-dbschematreenode")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-label")+(a.Ub?" waffle-dataconnector-dbschematreenode-rtl":"")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-spinner-container")+'">'+O(b3c({yb:!0},b))+"</div>";c=P('<svg class="waffle-dataconnector-expand-icon" width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><polygon id="Shape" points="0 0 18 0 18 18 0 18"></polygon><polygon id="Shape" fill-opacity="0.87" fill="#000000" points="5 7 9 11 13 7"></polygon></g></g></svg>');
a=b+O(c)+'<div class="'+Q("waffle-dataconnector-dbschematreenode-title")+'">'+O(a.title)+'</div></div><div class="'+Q("waffle-dataconnector-dbschematreenode-child-container")+'" role="group"></div></div>';return P(a)};function l9d(a){this.C=a}l9d.prototype.getType=g("C");function m9d(a){this.C="jdbc-table";this.D=a}r(m9d,l9d);function B4(a,b,c,d){c=void 0===c?!1:c;M.call(this,d);this.kc(b);this.J=a;this.nextSibling=this.previousSibling=this.parentNode=null;this.H=(this.D=c)?2:0;this.F=this.C=!1}r(B4,M);p=B4.prototype;p.Ca=function(){this.kb(N(k9d,{title:this.J,id:this.getId()}))};p.sb=function(){return this.ib("waffle-dataconnector-dbschematreenode-child-container")};
p.Ia=function(){M.prototype.Ia.call(this);var a=this.Ja("waffle-dataconnector-dbschematreenode-label"),b=this.Ja("waffle-dataconnector-dbschematreenode-title");a.id=this.getId()+"-label";vk(this.Oa(),"labelledby",a.id);this.D||vk(this.Oa(),"expanded",this.C);vk(this.Oa(),"selected",this.F);qk(this.Oa(),"treeitem");qk(this.Ja("waffle-dataconnector-dbschematreenode-spinner-container"),"presentation");qk(this.Ja("waffle-dataconnector-expand-icon"),"presentation");Gk(this.Oa(),"waffle-dataconnector-dbschematreenode-rtl",
this.$d());Hva(this.qa());qm(b,this.J,void 0);n9d(this,!1);Gk(this.Oa(),"waffle-dataconnector-dbschematreenode-leaf",this.D);this.getHandler().R(a,"click",this.cIb)};p.getTitle=g("J");p.cIb=function(){this.Cd(!this.C);this.$b(!0)};p.Cd=function(a){if(!this.D&&a!=this.C){var b=fva(64,a);this.dispatchEvent(b)&&n9d(this,a)}};function n9d(a,b){a.D||(a.C=b,a.rb()&&(Gk(a.Oa(),"waffle-dataconnector-dbschematreenode-open",a.C),vk(a.Oa(),"expanded",a.C)))}
p.$b=function(a){if(a!=this.F){var b=fva(8,a);this.dispatchEvent(b)&&(this.F=a,this.rb()&&(Gk(this.Oa(),"waffle-dataconnector-dbschematreenode-selected",this.F),vk(this.Oa(),"selected",a)))}};p.Re=g("C");p.Do=g("H");p.kc=function(a){M.prototype.kc.call(this,a)};p.Ra=function(){return M.prototype.Ra.call(this)};p.Wc=function(a){return M.prototype.Wc.call(this,a)};p.Nc=function(a){return M.prototype.Nc.call(this,a)};
p.Ga=function(a,b){if(this.D)throw Error("Can't add child to leaf node");M.prototype.Ga.call(this,a,b)};function o9d(a){a.parentNode=null;var b=a.previousSibling,c=a.nextSibling;a.previousSibling=null;a.nextSibling=null;b&&(b.nextSibling=c);c&&(c.previousSibling=b)}p.Of=function(a,b,c){if(this.D)throw Error("Can't add child to leaf node");var d=this.Nc(b-1),e=this.Nc(b);a.parentNode=this;a.nextSibling=e;if(a.previousSibling=d)d.nextSibling=a;e&&(e.previousSibling=a);M.prototype.Of.call(this,a,b,c)};
p.removeChild=function(a,b){o9d(a);return M.prototype.removeChild.call(this,a,b)};p.vd=function(){return M.prototype.vd.call(this,!0)};p.An=function(a){return M.prototype.An.call(this,a,!0)};function p9d(a){var b=a.C.vd(!0);wb(b);q9d(a,!1)}function q9d(a,b){a.rb()&&K(a.Ja("waffle-dataconnector-schema-menu-error-message"),b)};function r9d(a){p9d(a);a.F.setActive(!0);a.H.H().then(function(b){a.F.setActive(!1);b.forEach(function(b){b=b.getName();b=new B4(b,new m9d(b));q9d(a,!1);a.C.Ga(b,!0)});0==b.length&&q9d(a,!0)},function(){a.F.setActive(!1);q9d(a,!0)})};function s9d(a,b){at(a.Jc,t9d(a));a.C="vertical"==a.D?CRa(a.Jc,b):DRa(a.Jc,b);var c=ia("vertical"==a.D?[a.C,0]:[0,a.C]);b=c.next().value;c=c.next().value;uH(a.Oa(),b,c,a.$d());a.dispatchEvent("Zf")}function t9d(a){var b=a.Oa().parentElement.getBoundingClientRect(),c=b.height;b=b.width;"horizontal"==a.D?(b=0,c-=a.Xc()):(c=0,b-=a.Xc());return new Vk(0,0,b,c)};function u9d(a,b){var c=b.getErrorCode(),d=T(b,3);switch(c){case 20:return v9d(a,d);case 14:return C4('Update parameter "'+(T(b,6).toUpperCase()+'" to reference a cell in the current workbook and try again'));case 15:return C4('Update the cell referenced by parameter "'+(T(b,6).toUpperCase()+'" to be text or a number'));case 16:return C4("Select a parameter name you haven't used before");case 13:return C4('Define your parameter "'+(T(b,6).toUpperCase()+'" and try again'));case 6:return I(H(),"docs-idu")?
(a=new Zq,b=a.ue("span",{"class":"waffle-dataconnector-error-message"})+("Query timed out. "+(a.ue("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+(a.ye("a")+a.ye("span"))))),a=a.format(b)):a=w9d("Query timed out",d),a;case 8:return I(H(),"docs-idu")?(a=new Zq,b="Results exceed "+(x9d+(" rows. Update query and run again. "+(a.ue("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.ye("a"))))),a=a.format(b),a=C4(a)):
a=w9d(y9d,d),a;case 18:return C4("The query returns an ARRAY or a STRUCT type, which is currently not supported.");case 9:return a=new Zq,b="Go to Plx to specify an engine other than 'Auto' and try again. "+(a.ue("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.ye("a"))),a=a.format(b),C4(a);case 19:return C4("The query is already in execution.");case 17:return a="Can not insert the results of the query: that would increase the number of cells in the workbook above the limit of "+
(ch(H(),"fmtc")+" cells."),C4(a);case 22:return C4("Duplicated column names or aliases are not supported. Please update your query.");case 23:return C4("There is no sheet associated with this query.");case 24:return C4("Can not insert the results of the query: exceeds the maximum characters allowed in a single cell.")}return z9d(d)}
function A9d(a){var b=new Zq;a=(new Qu("To execute this query, {startLink}sign in to your Google account{endLink}")).format({startLink:b.ue("a",{href:"#",id:a}),endLink:b.ye("a")});return b.format(a)}function v9d(a,b){if(!b)return z9d(b);switch(a){case 2:return C4("Plx error: "+b);case 3:return C4("BigQuery error: "+b);default:return C4("Database error: "+b)}}function z9d(a){return w9d("Something's wrong. Please try again later",a)}var x9d=(new Ou(1)).format(1E4),y9d="Results exceed "+(x9d+" rows. Update query and run again.");
function C4(a){return bd("span",{"class":"waffle-dataconnector-error-message"},a)}function w9d(a,b){var c=new Zq;b&&(a=a+": "+b);return C4(c.format(a))};function B9d(a){switch(a){case 2:var b=1;break;case 3:b=2;break;default:b=0}a=new z8d;G(a,1,b);b=new Sj;xf(b,91,a);return b};function C9d(){}r(C9d,Lr);C9d.prototype.Qb=n("waffle-dataconnector-queryeditor-removable-chip-remove-button");va(C9d);function D9d(){}r(D9d,Lr);D9d.prototype.Ca=function(a){var b=Lr.prototype.Ca.call(this,a);a.qa().appendChild(b,a.qa().Ca("DIV","waffle-dataconnector-queryeditor-removable-chip-chip-content"));return b};D9d.prototype.sb=function(a){return Id("waffle-dataconnector-queryeditor-removable-chip-chip-content",a)};D9d.prototype.Qb=n("waffle-dataconnector-queryeditor-removable-chip-button");
va(D9d);var E9d=new Az;function F9d(a){return a.C.ud().map(function(a){return a.Ra()})};function G9d(){y.call(this);this.C=Md()}r(G9d,y);function H9d(a,b){a.C.dataConnectorOnCompleteAuth=b;b=(new co(a.C.location.href)).resolve(new co("dbx/ssoLogin")).toString();var c=Kd();(a=ar(b,{target:"google_popup",width:500,height:500,top:Math.floor((c.height-500)/2),left:Math.floor((c.width-500)/2),toolbar:!1,menubar:!1,location:!1,statusbar:!1},a.C))&&a.focus()}G9d.prototype.Ha=function(){delete this.C.dataConnectorOnCompleteAuth;y.prototype.Ha.call(this)};function I9d(a){var b=a.pha(),c;if(c=b){a=ia(F9d(a.Xa));for(c=a.next();!c.done;c=a.next())Fv(b,3,c.value);c=b}return c}function J9d(a){a.J.setVisible(!0);var b=Math.min(a.J.Pab().height+16,240);K9d(a,b)}function L9d(a){if(!a.O.enabled){var b=0;M9d(a,b);a.O.R("tick",function(){a.isDisposed()||(b+=.1,M9d(a,b))});a.O.start()}}function M9d(a,b){D4(a,Yc("Executing query "+(b.toFixed(1)+"s")))}function N9d(a,b){a.Ta=!1;a.O.stop();a.O.BC();O9d(a,!0);P9d(a,b.bj());Q9d(a)}
function P9d(a,b){10==b.getErrorCode()?R9d(a):D4(a,u9d(a.lC(),b))}function S9d(a){a.Ta=!0;D4(a,Yc("Updating workbook"));Q9d(a)}function K9d(a,b){var c=void 0===c?!0:c;A(a.va);a.va=null;c?(c=T9d(a),a.va=new U9d(c,b,200,a),a.xa(a.va),a.va.play()):V9d(a,b)}function T9d(a){return a.rb()?rl(a.Ja("waffle-dataconnector-newqueryeditor-preview-pane")).height:0}function V9d(a,b){var c=a.Ja("waffle-dataconnector-newqueryeditor-main");b=rl(c).height-a.F.Xc()-b;s9d(a.F,b)}
function Q9d(a){var b=I9d(a),c=a.$a.C;a.Ta||null==b||c?(a.Ma.Na(!1),a.ma.Na(!1)):(a.ma.Na(!0),a.Ma.Na(!0));b=a.eb&&a.eb.equals(b);a.J.Poa(!b)}function W9d(a){var b=new aZ;a=I9d(a);U(b,1,a);U(b,2,30);return b}function R9d(a){var b="waffle-dataconnector-ssologin-"+Zb(),c=A9d(b);D4(a,c);(b=Fd(b))&&a.getHandler().R(b,"click",function(){return X9d(a)})}function X9d(a){H9d(a.Qc,function(){O9d(a,!1);NE.Kb(W9d(a),a.qw)})}
function D4(a,b,c){c=void 0===c?!0:c;a=a.Ja("waffle-dataconnector-newqueryeditor-footer-message");fd(a,b);c&&HI(fe(a))}function O9d(a,b){a.rb()&&Gk(a.Ja("waffle-dataconnector-newqueryeditor-footer-message-container"),"waffle-dataconnector-newqueryeditor-unhandled-error",b)}function U9d(a,b,c,d){zu.call(this,[a],[b],c);this.D=d}r(U9d,zu);U9d.prototype.t8=function(){V9d(this.D,this.coords[0])};U9d.prototype.F=function(){V9d(this.D,this.uO[0])};
var Y9d=new Zq,Z9d="Inserted data is visible to all. The query is visible only to people with edit access. "+(Y9d.ue("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+Y9d.ye("a"))),$9d=Y9d.format(Z9d);function a$d(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-button")+'">';var b=P('<svg class="waffle-dataconnector-info-icon-filled" fill="#000000" fill-opacity="0.54" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>');
a=a+O(b)+'</span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-message")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-spinner")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")+'">';a+="Error";b=P('<svg class="waffle-dataconnector-refresh-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><polygon points="0 0 18 0 18 18 0 18"/><path fill="#000" d="M9,13.5 C6.51,13.5 4.5,11.49 4.5,9 C4.5,6.51 6.51,4.5 9,4.5 C10.24,4.5 11.36,5.02 12.17,5.83 L10,8 L15,8 L15,3 L13.24,4.76 C12.15,3.68 10.66,3 9,3 C5.69,3 3.01,5.69 3.01,9 C3.01,12.31 5.69,15 9,15 C11.97,15 14.43,12.84 14.9,10 L13.38,10 C12.92,12 11.14,13.5 9,13.5 L9,13.5 Z"/></g></svg>');
a+="</span></span>"+O(b);return P(a+"Refresh query</div>")}
function b$d(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-editquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'">';var b=P('<svg class="waffle-dataconnector-edit-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');a+=O(b);return P(a+
"Edit query</div>")}function c$d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-viewerror")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(F8d({color:"#000000"},b));return P(a+"View error</div>")}function d$d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-bigquery-helpdoc")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(G8d(null,b));return P(a+"Learn more about BigQuery</div>")};function e$d(a,b,c,d){un.call(this,N(a$d),a,d);this.V=b;this.J=c;this.H=Jm(new Im,72).build();this.C=new Mr(void 0,Ql(Lr,"waffle-dataconnector-pill-menuitem-refreshquery-info-button"),this.qa());this.Ga(this.C);this.D=new Mr(void 0,Ql(Lr,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"),this.qa());this.Ga(this.D);this.F=!1;this.Uv(73)}r(e$d,un);p=e$d.prototype;
p.Ia=function(){un.prototype.Ia.call(this);J(this.Oa(),"waffle-dataconnector-pill-menuitem-refreshquery");this.C.Va(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-button"));this.C.Uf("To show the query info, press I.");this.C.Jd("Show the query info");this.D.Va(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"));this.reset();this.getHandler().R(this.C,"action",this.hGa).R(this.D,"action",this.aIb)};
p.Xe=function(a){return a.keyCode==this.tR?(this.F&&this.hGa(null),!0):un.prototype.Xe.call(this,a)};p.Mg=function(a){if(a&&Od(a.target)){var b=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info");if(be(b,a.target))return!0}return un.prototype.Mg.call(this,a)};p.refresh=function(a){this.F=a;this.reset()};
p.reset=function(){K(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info"),this.F);if(this.F){f$d(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-button");var a=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");fd(a,dd)}};p.aIb=function(a){a.stopPropagation();sub.Kb(void 0,this.H)};
p.hGa=function(a){var b=this;a&&a.stopPropagation();f$d(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-spinner");this.J.C(35737,this.H);g$d(this).then(function(a){a=T(a,2);return h$d(a).then(function(a){a=T(T(a,5),1);a=P8d(a);var c=b.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");fd(c,Yc(a));f$d(b,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");HI(a)},function(){return i$d(b)})},function(){return i$d(b)})};
function i$d(a){f$d(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")}function g$d(a){var b=new t9c;U(b,1,a.V);return w8d(AZ.getInstance(),b)}function h$d(a){T(a,6);var b=new aZ;a=a.clone();U(b,1,a);U(b,2,1);U(b,4,!0);return s8d(AZ.getInstance(),b)}
function f$d(a,b){["waffle-dataconnector-pill-menuitem-refreshquery-info-button","waffle-dataconnector-pill-menuitem-refreshquery-info-message","waffle-dataconnector-pill-menuitem-refreshquery-info-spinner","waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"].forEach(function(b){return K(a.Ja(b),!1)});K(a.Ja(b),!0);a.C.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-button"==b);a.D.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"==b)}
;function j$d(a,b,c,d){c=void 0===c?!1:c;qZ.call(this,Ds(H8d,{opacity:.54}),new zn(d),k$d.getInstance(),d);this.F=a;this.O=c;this.L=b;this.J=Km(Jm(new Im,72),B9d(ritz_api.DbxApi.getTypeOfQuery(this.F))).build();this.D={};this.D["refresh-query"]=new e$d("refresh-query",this.F,this.L,this.qa());this.cd(this.D["refresh-query"]);this.D["edit-query"]=new un(N(b$d),"edit-query",this.qa());this.cd(this.D["edit-query"]);this.D["view-error"]=new un(N(c$d),"view-error",this.qa());this.cd(this.D["view-error"]);
this.D["menu-separator"]=new yn(this.qa());this.cd(this.D["menu-separator"]);this.D["bigquery-helpdoc"]=new un(N(d$d),"bigquery-helpdoc",this.qa());this.cd(this.D["bigquery-helpdoc"]);this.getHandler().R(this.Vb(),"action",this.ea)}r(j$d,qZ);j$d.prototype.Ia=function(){qZ.prototype.Ia.call(this);J(this.Vb().getElement(),"waffle-dataconnector-pill-menu");tDc(this,new Om(this.Oa(),this.O?4:0));this.dx=!0};j$d.prototype.ea=function(a){a=a.target.Ra();(a=l$d[a])&&a.Kb(void 0,this.J)};
j$d.prototype.refresh=function(a){var b=[];switch(a){case 2:b.push("edit-query");b.push("refresh-query");break;case 3:b.push("view-error")}if(a=3==ritz_api.DbxApi.getTypeOfQuery(this.F))b.push("menu-separator"),b.push("bigquery-helpdoc");this.D["refresh-query"].refresh(a);a=ia(Object.values(this.D));for(var c=a.next();!c.done;c=a.next())c.value.setVisible(!1);b=ia(b);for(a=b.next();!a.done;a=b.next())this.D[a.value].setVisible(!0)};
j$d.prototype.Cd=function(a,b){if(a){var c=this.Vb();if(c&&c.rb()){c=ia(Object.values(this.D));for(var d=c.next();!d.done;d=c.next())d=d.value,d.reset&&d.reset()}}qZ.prototype.Cd.call(this,a,b)};var m$d={},l$d=(m$d["bigquery-helpdoc"]=fub,m$d["edit-query"]=jub,m$d["refresh-query"]=qub,m$d["view-error"]=sub,m$d);function k$d(){}r(k$d,S9c);k$d.prototype.bq=function(a){return a.Ca("DIV",{style:"display:none;"})};va(k$d);function n$d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill")+'" tabindex="0"><div class="'+Q("waffle-dataconnector-pill-info")+'"><div class="'+Q("waffle-dataconnector-pill-timestamp")+'"></div><div class="'+Q("waffle-dataconnector-pill-progress")+'"><div class="'+Q("waffle-dataconnector-pill-spinner")+'"></div><span class="'+Q("waffle-dataconnector-pill-progress-message")+'">';a=a+"Running query..."+(' </span></div><div class="'+Q("waffle-dataconnector-pill-error")+'">'+O(F8d(null,
b)));a=a+"Execution error"+('</div></div><div class="'+Q("waffle-dataconnector-pill-editquery-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-refresh-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-menu-button-wrapper")+'"></div></div>');return P(a)};function o$d(a,b,c,d,e,f,h){f=void 0===f?!1:f;M.call(this,h);this.O=a;this.Da=b;this.va=c;this.H=f;this.V=d;this.ma=e;b=ritz_api.DbxApi.getTypeOfQuery(a);this.L=Km(Jm(new Im,72),B9d(b)).build();this.ea=new p$d;this.J=new sm;this.xa(this.J);this.F=new tX;this.Ga(this.F);this.F.Dd("waffle-dataconnector-pill-editquery-button");ym(this.J,this.F,jub,Am,void 0,this.L);this.D=new tX("Refresh");this.D.Dd("waffle-dataconnector-pill-refresh-button");this.Ga(this.D);this.C=new j$d(a,this.ma,this.H,this.qa());
this.C.Dd("waffle-dataconnector-pill-menu-button");this.Ga(this.C)}r(o$d,M);p=o$d.prototype;p.Ca=function(){this.kb(N(n$d))};
p.Ia=function(){var a=this;M.prototype.Ia.call(this);qk(this.Oa(),"toolbar");var b=this.getId()+":label";this.Ja("waffle-dataconnector-pill-info").id=b;vk(this.Oa(),"labelledby",b);this.F.render(this.Ja("waffle-dataconnector-pill-editquery-button-wrapper"));this.D.render(this.Ja("waffle-dataconnector-pill-refresh-button-wrapper"));this.C.render(this.Ja("waffle-dataconnector-pill-menu-button-wrapper"));qm(this.C.Oa(),"More options",void 0);this.getHandler().R(this.D,"action",this.Zvb).R(ne(this.qa()),
"focus",this.refresh).R(this.Oa(),"keydown",function(a){var b=a.keyCode;37!=b&&39!=b||a.preventDefault()});B.ep&&B.product.$o&&this.getHandler().R(this.Oa(),"focus",function(){Zk(a.Oa(),{outline:"1px dotted black"})}).R(this.Oa(),"blur",function(){Zk(a.Oa(),{outline:"0"})});this.refresh();b=new EQ(this.Oa(),this.qa());this.xa(b);FQ(b)};p.Ha=function(){M.prototype.Ha.call(this)};p.bd=function(){this.va.bd(this.Oa(),this.H?5:1,new Mk(0,this.H?50:0,12,this.H?0:50))};
p.refresh=function(){var a=f9d(this.V,this.O);a=a?a.getState():2;var b=kub.isEnabled();switch(a){case 5:case 1:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!0);K(this.Ja("waffle-dataconnector-pill-error"),!1);this.F.setVisible(!1);this.D.setVisible(!1);this.D.Na(!1);this.C.setVisible(!1);break;case 4:case 2:K(this.Ja("waffle-dataconnector-pill-timestamp"),!0);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),
!1);q$d(this);this.F.setVisible(!1);this.D.setVisible(b);this.D.Na(b);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);break;case 3:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),!0);this.F.setVisible(b);this.D.setVisible(!1);this.D.Na(!1);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);b||(K(this.Ja("waffle-dataconnector-pill-timestamp"),!0),K(this.Ja("waffle-dataconnector-pill-error"),
!1),q$d(this));break;default:dLc("Unrecognized execution state: "+a)}this.bd()};function q$d(a){var b=ritz_api.DbxApi.getLastExecutionTimeForSheet(a.Da);0>=b||(b="Updated "+a.ea.format(b),a=a.Ja("waffle-dataconnector-pill-timestamp"),de(a,b))}p.Zvb=function(){this.D.Na(!1);qub.Kb(void 0,this.L)};p.focus=function(){this.Oa().focus()};function p$d(){this.C=new Iu(1);this.D=new Iu(Lu.MONTH_DAY_MEDIUM);this.F=new Iu(7)}
p$d.prototype.format=function(a){a=new Date(a);var b=new Date,c;0<b.getFullYear()-a.getFullYear()?c=this.C.format(a):a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?c="today":c=this.D.format(a);a=this.F.format(a);return c+(", "+a)};function r$d(a,b,c,d,e,f,h){y.call(this);this.D=a;this.H=b;this.L=c;this.ea=d;this.J=e;this.La=new Jk(this);this.xa(this.La);this.F=new we(this);this.xa(this.F);this.O=f;this.V=h;this.C=null;this.La.R(this.L,"F",this.ZHb).R(this.D,"fb",this.$Hb).R(this.D,"gb",this.jyb).R(this.ea,"db-execution-status-updated",this.YHb).R(this.D,"yb",this.refresh);this.F.subscribe(lub,"action",this.Dnb)}r(r$d,y);p=r$d.prototype;p.Ha=function(){y.prototype.Ha.call(this);A(this.C)};p.refresh=function(){s$d(this)};
p.ZHb=function(){this.C&&this.C.bd()};p.$Hb=function(){s$d(this)};p.jyb=function(){A(this.C);this.C=null};p.Dnb=function(){this.C&&(this.C.focus(),this.O.tb(2))};function s$d(a){var b=a.D.C.C;if(b&&fJ(b))if(a.C)a.C.refresh();else{var c=VI(a.H);if(c){b=c.$d();c=new Om(c.Ka.J,b?5:1);var d=a.D.C.C,e=T(d.H,1);d=d.jb();a.C=new o$d(e,d,c,a.J,a.V,b);a.C.render()}}}p.YHb=function(a){a.F&&0!=a.F.length&&this.C&&bb(a.F,this.C.O)&&this.C.refresh()};function t$d(a,b,c,d){y.call(this);this.V=a;this.ea=b;this.ma=c;this.J=this.L=null;this.H=d||null;this.C=3;this.O=new u$d;this.D=this.F=null}r(t$d,y);p=t$d.prototype;p.getId=function(){return Ca(this)};p.Ha=function(){this.stop();y.prototype.Ha.call(this)};p.start=function(){this.C=2;this.D=this.F=null;this.nza(this.V)};p.stop=function(){2==this.C&&(this.C=3,this.O.stop())};function v$d(a,b){a.L=b;return a}function w$d(a,b){a.J=b;return a}
p.nza=function(a){var b=this;this.ea.call(this.H,a).then(function(a){if(2==b.C){b.F=a;b.D=null;var c=b.ma.call(b.H,a);if(c){a:{a=b.O;c=u(b.nza,b,c);if(10>a.F){a.F++;var e=1E3}else if(60>a.D)a.D++,e=5E3;else{a=!1;break a}e+=Math.round(.2*e*(Math.random()-.5)*2);a.C=Ul(c,e);a=!0}a||x$d(b,Error("Polling timed out"))}else b.stop(),b.C=4,b.F=a,b.D=null,b.L&&b.L.call(b.H,a)}},function(a){2==b.C&&x$d(b,a)})};function x$d(a,b){a.stop();a.C=1;a.F=null;a.D=b;a.J&&a.J.call(a.H,b)}p.getStatus=g("C");p.hF=g("D");
function u$d(){this.D=this.F=0;this.C=null}u$d.prototype.stop=function(){this.D=this.F=0;$l(this.C);this.C=null};function y$d(a){this.C=a}function z$d(a,b){var c=T(b,1);return new t$d(b,function(b){return s8d(a.C,b)},function(a){if(1==a.bj().getState()){var b=new aZ;U(b,1,c);b.setToken(a.bj().getToken());return b}return null})};var A$d=Object.freeze({caption:"Dremel",value:"DREMEL"}),B$d=Object.freeze({caption:"F1",value:"F1"}),C$d=Object.freeze({caption:"Procella",value:"PROCELLA"});function D$d(a,b,c,d){var e="Error in query on "+c;c=new W8d;c.Dd("waffle-dataconnector-error-popup");ft(c,e);c.C.setContent("Open query editor");c.J.setContent("Ok");a=10==a.getErrorCode()?A9d(d):u9d(b,a);gt(c,a);return c};function E$d(a,b,c,d,e,f,h,k,l){y.call(this);var m=this;this.L=new d9d;this.xa(this.L);this.D=AZ.getInstance();this.va=new y$d(this.D);this.F=b;this.ea=f;this.O=l;this.C=new g9d(f);this.H=new r$d(b,c,d,a,this.L,e,this.O);this.xa(this.H);this.La=new Jk(this);this.xa(this.La);this.V=new we(this);this.xa(this.V);this.ma=new G9d;this.xa(this.ma);F$d(this,k);this.La.R(this.C.D,["show","hide"],this.Rkb);this.La.R(this.C.D,["Xf"],this.Rpb);G$d(this);this.H.refresh();this.J=new Xe;jE("queryeditor",function(){var b=
mE("queryeditor");m.J.callback(b.C(h,a,m.D,m.ea,m.O,d))})}r(E$d,y);
function F$d(a,b){var c=Enc(),d=new Vu(AS.concat(["waffle-dataconnector-connection-selected"])),e=new Vu(["waffle-dataconnector-active-sheet-db-connection","embedded-object-unfocused"]),f=AS.concat(["waffle-dataconnector-active-sheet-db-connection","sheet-access-no-protected-range-for-sheet"]);c||f.push("waffle-dataconnector-active-sheet-not-plx");c=new Vu(f);gub.Na(!0);b.C(LE,BS).F(LE,BS).C(ME,BS).F(ME,BS).C(qub,c).C(jub,c).C(NE,BS).C(rub,d).C(oub,c).C(sub,c).C(lub,e);b.C(kub,c);a.V.xb(kub,Na,function(){a.H.refresh()});
I(H(),"fedp")&&b.C(iub,BS).F(iub,BS)}function G$d(a){a.V.subscribe(gub,"action",function(){j9d(a.C)}).subscribe(NE,"action",a.Vub).subscribe(LE,"action",a.Ujb).subscribe(iub,"action",a.Tjb).subscribe(qub,"action",a.Yvb).subscribe(jub,"action",a.Zma).subscribe(ME,"action",a.gmb).subscribe(oub,"action",a.mtb).subscribe(sub,"action",a.Zma).subscribe(fub,"action",a.jtb)}p=E$d.prototype;p.qf=function(a){this.D.qf(a)};p.Rkb=function(){var a=h9d(this.C);a&&a.isVisible()||(NE.setValue(null),rub.setValue(null))};
p.nLa=function(a){var b=this;a=void 0===a?!1:a;var c=new a9d;this.xa(c);A4(this.C,c,!a);c.getResult().then(function(c){var d=a,f=c.getId();c=c.getName();if(d){j9d(b.C);d=h9d(b.C);d.yc=f;d.Sa=!0;-1!=fe(M8d(d)).indexOf("A managed data source is missing under query settings")&&D4(d,bd("span"));var h=d.L;h.F=c;de(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),c);Gk(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),"waffle-dataconnector-jdbc-query-settings-widget-connection-name-error",
!1);d.L.Cd(!0);d.Yd.J(f);r9d(d.mb);d.FG()}else H$d(b,f,c)},function(){j9d(b.C)})};p.S1a=function(){var a=I$d("Connecting to Plx...");J$d(this);Vq(Qq.getInstance(),a)};p.R1a=function(){var a=this,b=I$d("Connecting to BigQuery...");V8d(new U8d(this.D)).then(function(c){Vq(Qq.getInstance(),b);K$d(a,c)},function(){Vq(Qq.getInstance(),b);L$d("Could not connect to BigQuery")})};p.OOb=function(){M$d(this,[],!1)};
function K$d(a,b){b=new A8d(b);var c=new R8d(b);a.xa(c);A4(a.C,c);c.getResult().then(function(b){N$d(a,b)},function(){a.O.C(35753);A(c)})}function I$d(a){return Qq.getInstance().postMessage(Wq(a,"info",!0))}function L$d(a){Qq.getInstance().postMessage(Wq(a,"error",!0))}function H$d(a,b,c){a.J.addCallback(function(d){d=d.pab(b,c);a.xa(d);A4(a.C,d)})}function N$d(a,b){a.J.addCallback(function(c){c=c.oab(b);a.xa(c);A4(a.C,c)})}
function J$d(a){a.J.addCallback(function(b){b=b.qab();a.xa(b);A4(a.C,b)})}
p.Vub=function(a){var b=h9d(this.C);b.Ta=!0;D4(b,Yc("Executing query"));Q9d(b);L9d(b);var c=T(a,1);w$d(v$d(z$d(this.va,a),function(a){if(!b.isDisposed()){b.O.stop();b.O.BC();O9d(b,!1);b.Ta=!1;b.eb=c;var d=1E4<T(a,3)||!!T(a,4);b.gc=d;if(!b.isDisposed()){d=b.gc;var f=T(a,3);d=d?T(a,4)?"Query returns more than "+(O8d.format(f)+(" rows of data. Please revise your query to return no more than "+(O8d.format(1E4)+" rows."))):"Query returns "+(O8d.format(f)+(" rows of data. Please revise your query to return no more than "+
(O8d.format(1E4)+" rows."))):(new Qu("{TOTAL_ROWS, plural, =0 {Query returns no results.}=1 {Query returns 1 row of data.}other {Query returns # rows of data.}}")).format({TOTAL_ROWS:f});d=bd("strong",void 0,d);d=cd(d,bd("br"),$9d);D4(b,d)}b.J.ePb(T(a,2));J9d(b);b.ma.setContent("Refresh preview");Q9d(b)}}),function(a){b.isDisposed()||N9d(b,a)}).start()};p.Ujb=function(a){O$d(this,1,a)};p.Tjb=function(a){O$d(this,2,a)};
function O$d(a,b,c){var d=h9d(a.C);U(c,2,b);r8d(a.D,c).then(function(c){P$d(a,c);2==b&&dDb()},function(a){d.isDisposed()||N9d(d,a)});S9d(d)}function P$d(a,b){e9d(a.L,T(b,2),b.bj());var c=b.jb();i9d(a.C);FK(a.F,c)?IK(a.F.C)==c?a.H.refresh():MK(a.F,c,void 0,{xC:!0}):a.La.Kc(a.F,["qb","fb"],function(b){"qb"==b.type&&b.Gh==c&&MK(a.F,c,void 0,{xC:!0})})}p.Yvb=function(){M$d(this,[iN(this.F.C)],!0)};
function M$d(a,b,c){var d=new X8c;b.forEach(function(a){Fv(d,1,a)});t8d(a.D,d).then(function(b){Q$d(a,Hv(b,1));a.H.refresh()},function(b){return R$d(a,b,c)})}function R$d(a,b,c){var d=[],e=[];Hv(b,1).forEach(function(a){return 3==a.bj().getState()?e.push(a):d.push(a)});Q$d(a,d);a.H.refresh();c&&(b=e[0],c=b.bj(),c.getErrorCode(),S$d(a,b.jb(),c))}function Q$d(a,b){b.forEach(function(b){var c=FK(a.F,b.jb());if(c=c&&c.H)c=T(c,1),b=b.bj(),a.L.C[c]=b})}
function S$d(a,b,c){var d=FK(a.F,b),e=d&&d.H;if(e){d=d.pe();e=ritz_api.DbxApi.getTypeOfQuery(T(e,1));var f="waffle-dataconnector-ssologin-"+Zb(),h=D$d(c,e,d,f);a.xa(h);a.ea.Jh(h);h.render();h.setVisible(!0);h.getResult().then(function(){A(h);a.Zma(b)},function(){A(h)});(c=Fd(f))&&z4.prototype.getHandler.call(h).R(c,"click",function(){T$d(a,b,h)})}}function T$d(a,b,c){H9d(a.ma,function(){A(c);M$d(a,[b],!0)})}
p.Zma=function(a){if((a=void 0!==a?FK(this.F,a):this.F.C.C)&&fJ(a)){var b=a.H;a=T(b,1);switch(ritz_api.DbxApi.getTypeOfQuery(a)){case 2:U$d(this,a);break;case 1:b=T(b,2);V$d(this,b,a);break;case 3:W$d(this,a)}}};
function V$d(a,b,c){var d=X$d(a,c),e=Y$d(a,b),f=Z$d(a,c);a.J.addCallback(function(h){var k=I$d("Loading query...");Se([d,e,f]).then(function(d){var e=d[0],f=d[1]?d[1]:null;f=f?f.getName():null;d=h.uab(b,f,c,e,d[2]?d[2]:null);a.xa(d);Vq(Qq.getInstance(),k);A4(a.C,d)},function(){Vq(Qq.getInstance(),k);L$d("Could not load query")})})}
function U$d(a,b){var c=X$d(a,b),d=Z$d(a,b);a.J.addCallback(function(e){var f=I$d("Loading query...");Se([c,d]).then(function(c){c=e.vab(b,c[0],c[1]?c[1]:null);a.xa(c);Vq(Qq.getInstance(),f);A4(a.C,c)},function(){Vq(Qq.getInstance(),f);L$d("Could not load query")})})}
function W$d(a,b){var c=V8d(new U8d(a.D)),d=X$d(a,b),e=Z$d(a,b);a.J.addCallback(function(f){var h=I$d("Connecting to BigQuery...");Se([d,e,c]).then(function(c){var d=c[0],e=c[1]?c[1]:null;c=c[2];var k=T(d,4).Am();c=new A8d(c,k);d=f.sab(c,b,d,e);Vq(Qq.getInstance(),h);A4(a.C,d)},function(){Vq(Qq.getInstance(),h);L$d("Could not load query")})})}function X$d(a,b){var c=Te(),d=new t9c;U(d,1,b);w8d(a.D,d).then(function(a){c.resolve(T(a,2))},function(a){return c.reject(a)});return c.C}
function Y$d(a,b){var c=Te(),d=new A9c;U(d,1,b);y8d(a.D,d).then(function(a){c.resolve(T(a,1))},function(){return c.resolve(null)});return c.C}function Z$d(a,b){var c=f9d(a.L,b);if(!c||3!=c.getState())return Qe(null);c=new x9c;U(c,1,b);return a.D.bj(c).then(function(a){return a.bj()})}
p.gmb=function(a){var b=this,c=T(a,1),d=h9d(this.C);u8d(this.D,a).then(function(a){a=a.bj();b.L.C[c]=a;a=ritz_api.DbxApi.getSheetIdForQuery(c);MK(b.F,a,void 0,{xC:!0});i9d(b.C);b.H.refresh()},function(a){d.isDisposed()||N9d(d,a)});S9d(d)};p.mtb=function(){var a=this,b=this.F.C.C,c=T(b.H,1),d=new x9c;U(d,1,c);this.D.bj(d).then(function(c){(c=c.bj())&&3==c.getState()&&S$d(a,b.jb(),c)})};p.jtb=function(){ar("https://cloud.google.com/bigquery/docs/projects")};p.Rpb=function(){this.nLa(!0)};function $$d(){y.call(this)}r($$d,fE);$$d.prototype.C=function(){return E$d};lE("dataconnector",$$d);
